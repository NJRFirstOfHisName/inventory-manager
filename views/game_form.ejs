<%- include('layout', {title:title}) %>

<div class="content">
  <h1><%= title %></h1>

  <form method="POST" action="">
    <div class="form-group">
      <label for="title">Title:</label>
      <input
        type="text"
        id="title"
        class="form-control"
        placeholder="Title of game"
        name="title"
        required
        value="<%= typeof game === 'undefined' ? '' : game.title %>"
      />
    </div>

    <div class="form-group">
      <label for="description">Description:</label>
      <textarea
        name="description"
        id="description"
        type="textarea"
        class="form-control"
        placeholder="Description"
        required
      ><%= typeof game === 'undefined' ? '' : game.description %></textarea>
    </div>

    <div class="form-group">
      <label for="price">Sales price:</label>
      <input
        name="price"
        type="number"
        min="0"'
        step=".01"
        id="price"
        class="form-control"
        placeholder="price"
        required
        value="<%= typeof game === 'undefined' ? '' : game.price %>"
      />    
    </div>

    <div class="form-group">
      <label for="stock">Number of copies on hand (all platforms):</label>
      <input
        name="stock"
        type="number"
        min="0"
        id="stock"
        class="form-control"
        placeholder="stock"
        required
        value="<%= typeof game === 'undefined' ? '' : game.stock %>"
      />    
    </div>

    <div class="form-group">
      <label for="developer">Developer:</label>
      <input
        name="developer"
        id="developer"
        class="form-control"
        placeholder="developer"
        value="<%= typeof game === 'undefined' ? '' : game.developer %>"
      />    
    </div>

    <div class="form-group">
      <label for="publisher">Publisher:</label>
      <input
        name="publisher"
        id="publisher"
        class="form-control"
        placeholder="publisher"
        value="<%= typeof game === 'undefined' ? '' : game.publisher %>"
      />    
    </div>

    <div class="form-group">
      <label>Genre(s)</label>
      <div>
        <% genres.forEach(genre => { %>
        <div style="display: inline; padding-right: 10px">
          <input
            type="checkbox"
            class="checkbox-input"
            name="genre"
            id="<%= genre._id %>"
            value="<%= genre._id %>"
            <%= genre.checked ? 'checked' : '' %>
          />
          <label for="<%= genre._id %>"><%= genre.name %></label>
        </div>
        <% }) %>
      </div>
    </div>

  <div class="form-group">
    <label>Platform(s):</label>
    <div>
      <% platforms.forEach(platform => { %>
      <div style="display: inline; padding-right: 10px">
        <input
          type="checkbox"
          class="checkbox-input"
          name="platform"
          id="<%= platform._id %>"
          value="<%= platform._id %>"
          <%= platform.checked ? 'checked' : '' %>
        />
        <label for="<%= platform._id %>"><%= platform.name %></label>
      </div>
      <% }) %>
    </div>
  </div>
  <button class="btn btn-primary" type="submit">Submit</button>
</form>

  <% if(locals.errors) { %>
  <ul>
    <% errors.forEach(error => { %>
    <li><%= error.msg %></li>
    <% }) %>
  </ul>
  <% } %>
</div>
